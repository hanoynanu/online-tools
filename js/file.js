!function(t){function e(){this.prev="",this.result=[]}t.ot=t.ot||{};var o=t.Blob&&t.URL&&t.URL.createObjectURL;e.prototype.push=function(t){if(o){t=this.prev+t;var e=t.length-t.length%4;this.prev=t.substring(e),t=t.substring(0,e),this.result.push(this.toBytes(t))}else this.result.push(t)},e.prototype.pushText=function(t){this.result.push(t)},e.prototype.toBytes=function(t){for(var e=atob(t),o=new Uint8Array(e.length),a=0;a<e.length;++a)o[a]=e.charCodeAt(a);return o},e.prototype.finalize=function(e){if(o){this.prev&&this.result.push(this.toBytes(this.prev));var a=new Blob(this.result);return t.URL.createObjectURL(a,e?{type:"text/plain"}:void 0)}return"data:"+(e?"text/plain;,":"application/octet-stream;base64,")+this.result.join("")};var a,n=$("#droppable-zone"),r=$("#file-type"),i=$("#input"),l=$("#output"),u=$("#download-image");n.on("droppableFile:change",function(t,e){p=a=e[0],l.val(""),u.hide(),ot.autoUpdate()});var d=function(){if("text"===r.val())return l.val(""),u.hide(),void ot.autoUpdate();if("url"===r.val()){l.val("download...");var t=i.val();ot.getBlob(t,function(e){e?(p=e,ot.autoUpdate()):(p=null,l.val(t?"download failed":""))},function(t){var e=(t.total?(t.loaded/t.total*100).toFixed(2):100)+"%";l.val("download..."+e)})}},h=function(){i.off("change",d),i.off("input propertychange",h)};i.on("input propertychange",h),i.on("input propertychange change",d);var s=$("#download-file-name");s.change(function(){u.attr("download",s.val())}),s.change();var c=function(){f&&(f.abort(),f=null)};r.change(function(){l.val(""),u.hide(),"file"===r.val()?(ot.cancelGetBlob(),i.hide(),n.show(),p=a):(c(),i.show(),n.hide(),p=null,d())});var p,f,v=ot.execute;ot.setExecute(function(){if(!g)return l.val("loading...");if(c(),"text"===r.val())return v();if(p){if(!t.FileReader)return l.text("Your browser does not support.");u.hide();var e=t.PROCESSING_MESSAGE||"hashing...";if(f=new FileReader,method.update){var o=t.FILE_BATCH_SIZE||2097152,a=0,n=p.size,i=method;f.onload=function(t){try{i=i.update(t.target.result),d()}catch(t){l.val(t)}};var d=function(){if(a<n){l.val(e+(a/n*100).toFixed(2)+"%");var t=Math.min(a+o,n);f.readAsArrayBuffer(p.slice(a,t)),a=t}else ot.handleOutput(i.hex())};d()}else l.val(e),f.onload=function(t){try{ot.handleOutput(method(t.target.result))}catch(t){l.val(t)}},f.readAsArrayBuffer(p)}}),ot.DownloadBuilder=e,ot.DOWNLOAD_MESSAGE="Please click the download icon to download.",ot.setFilename=function(t){u.attr("download",t)},ot.setDownload=function(t){u.attr("href",t),u.show()};var g=!1;$(t).on("methodLoad",function(){g=!0,l.val(""),r.change()})}(window);